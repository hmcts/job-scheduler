server:
  port: 8484

management:
  security:
    enabled: ${MANAGEMENT_SECURITY_ENABLED:true}

s2s:
  url: ${S2S_URL}

idam:
  s2s-auth:
    url: ${S2S_URL}
    secret: ${S2S_SECRET}
    microservice: ${S2S_NAME:jobscheduler}
    tokenTimeToLiveInSeconds: ${S2S_TTL:14400}

spring:
  datasource:
    url: jdbc:postgresql://${JOB_SCHEDULER_DB_HOST:job-scheduler-database}:${JOB_SCHEDULER_DB_PORT:5432}/jobscheduler
    username: jobscheduler
    password: ${JOB_SCHEDULER_DB_PASSWORD:}
    properties:
      charSet: UTF-8
    maxWaitForConnection: 1
    minSize: 8
    maxSize: 32
    evictionInterval: 10
    minIdleTime: 1 minute
    checkConnectionWhileIdle: true
    checkConnectionOnReturn: true
    removeAbandoned: true
    removeAbandonedTimeout: 60
    abandonWhenPercentageFull: 0
    testOnBorrow: true
    validationQuery: SELECT 1

quartzProperties:
  org.quartz:
    scheduler:
      instanceId: AUTO
    dataSource:
      jobscheduler:
        driver: org.postgresql.Driver
        URL: ${spring.datasource.url}
        user: jobscheduler
        password: test
    jobStore:
      isClustered: true
      class: org.quartz.impl.jdbcjobstore.JobStoreTX
      driverDelegateClass: org.quartz.impl.jdbcjobstore.PostgreSQLDelegate
      dataSource: jobscheduler
    threadPool:
      class: org.quartz.simpl.SimpleThreadPool
      threadCount: 8

retryPolicy:
  maxNumberOfJobExecutions: ${MAX_NUMBER_OF_JOB_EXECUTIONS:5}
  delayBetweenAttemptsInMs: ${DELAY_BETWEEN_JOB_ATTEMPTS_MS:15000}
